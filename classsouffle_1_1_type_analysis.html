<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>souffle: souffle::TypeAnalysis Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">souffle
   &#160;<span id="projectnumber">1.4.0-131-geb5857a</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesouffle.html">souffle</a></li><li class="navelem"><a class="el" href="classsouffle_1_1_type_analysis.html">TypeAnalysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">souffle::TypeAnalysis Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for souffle::TypeAnalysis:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis__inherit__graph.png" border="0" usemap="#souffle_1_1_type_analysis_inherit__map" alt="Inheritance graph"/></div>
<map name="souffle_1_1_type_analysis_inherit__map" id="souffle_1_1_type_analysis_inherit__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_analysis.html" title="Abstract class for a AST Analysis. " alt="" coords="9,5,148,112"/></map>
</div>
<div class="dynheader">
Collaboration diagram for souffle::TypeAnalysis:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis__coll__graph.png" border="0" usemap="#souffle_1_1_type_analysis_coll__map" alt="Collaboration graph"/></div>
<map name="souffle_1_1_type_analysis_coll__map" id="souffle_1_1_type_analysis_coll__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_analysis.html" title="Abstract class for a AST Analysis. " alt="" coords="5,5,144,112"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad712d537f166af824ce980aac5088b09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#ad712d537f166af824ce980aac5088b09">getTypes</a> (const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *argument) const </td></tr>
<tr class="memdesc:ad712d537f166af824ce980aac5088b09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the computed types for the given argument.  <a href="#ad712d537f166af824ce980aac5088b09">More...</a><br/></td></tr>
<tr class="separator:ad712d537f166af824ce980aac5088b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b14d983a147434ebbbea66d4072229"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#ad8b14d983a147434ebbbea66d4072229">print</a> (std::ostream &amp;os) const override</td></tr>
<tr class="memdesc:ad8b14d983a147434ebbbea66d4072229"><td class="mdescLeft">&#160;</td><td class="mdescRight">print the analysis result in HTML format  <a href="#ad8b14d983a147434ebbbea66d4072229">More...</a><br/></td></tr>
<tr class="separator:ad8b14d983a147434ebbbea66d4072229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37750304e3c3efc004294bbc934e8549"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#a37750304e3c3efc004294bbc934e8549">run</a> (const <a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit) override</td></tr>
<tr class="memdesc:a37750304e3c3efc004294bbc934e8549"><td class="mdescLeft">&#160;</td><td class="mdescRight">run analysis for a RAM translation unit  <a href="#a37750304e3c3efc004294bbc934e8549">More...</a><br/></td></tr>
<tr class="separator:a37750304e3c3efc004294bbc934e8549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsouffle_1_1_ast_analysis"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsouffle_1_1_ast_analysis')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsouffle_1_1_ast_analysis.html">souffle::AstAnalysis</a></td></tr>
<tr class="memitem:a539a236ce3a9c9e6efc7c712b8720df9 inherit pub_methods_classsouffle_1_1_ast_analysis"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_ast_analysis.html#a539a236ce3a9c9e6efc7c712b8720df9">~AstAnalysis</a> ()=default</td></tr>
<tr class="separator:a539a236ce3a9c9e6efc7c712b8720df9 inherit pub_methods_classsouffle_1_1_ast_analysis"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:abd1dbe803142616087fc5dc59bdddb68"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_ast_transforms_8cpp.html#a32ecbd9872be86ec1594cff1d9698d99">std::map</a>&lt; const <br class="typebreak"/>
<a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *, <a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#abd1dbe803142616087fc5dc59bdddb68">analyseTypes</a> (const <a class="el" href="classsouffle_1_1_type_environment.html">TypeEnvironment</a> &amp;env, const <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> &amp;clause, const <a class="el" href="classsouffle_1_1_ast_program.html">AstProgram</a> *program, bool verbose=false)</td></tr>
<tr class="memdesc:abd1dbe803142616087fc5dc59bdddb68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyse the given clause and computes for each contained argument a set of potential types.  <a href="#abd1dbe803142616087fc5dc59bdddb68">More...</a><br/></td></tr>
<tr class="separator:abd1dbe803142616087fc5dc59bdddb68"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a88c2b46242dcb7466a869059309b965e"><td class="memItemLeft" align="right" valign="top">static constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#a88c2b46242dcb7466a869059309b965e">name</a> = &quot;type-analysis&quot;</td></tr>
<tr class="separator:a88c2b46242dcb7466a869059309b965e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac9b0bfb44850f1c3295306cd9cea7c84"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr<br class="typebreak"/>
&lt; <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">annotatedClauses</a></td></tr>
<tr class="separator:ac9b0bfb44850f1c3295306cd9cea7c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78a3ac07ebd79b4d3e3d1c277522178"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_ast_transforms_8cpp.html#a32ecbd9872be86ec1594cff1d9698d99">std::map</a>&lt; const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> <br class="typebreak"/>
*, <a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">argumentTypes</a></td></tr>
<tr class="separator:aa78a3ac07ebd79b4d3e3d1c277522178"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00071">71</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abd1dbe803142616087fc5dc59bdddb68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_ast_transforms_8cpp.html#a32ecbd9872be86ec1594cff1d9698d99">std::map</a>&lt; const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *, <a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a> &gt; souffle::TypeAnalysis::analyseTypes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_type_environment.html">TypeEnvironment</a> &amp;&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> &amp;&#160;</td>
          <td class="paramname"><em>clause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_program.html">AstProgram</a> *&#160;</td>
          <td class="paramname"><em>program</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Analyse the given clause and computes for each contained argument a set of potential types. </p>
<p>If the set associated to an argument is empty, no consistent typing can be found and the rule can not be properly typed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>a typing environment describing the set of available types </td></tr>
    <tr><td class="paramname">clause</td><td>the clause to be typed </td></tr>
    <tr><td class="paramname">program</td><td>the program </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a map mapping each contained argument to a a set of types </dd></dl>

<p>Definition at line <a class="el" href="_ast_type_analysis_8cpp_source.html#l00877">877</a> of file <a class="el" href="_ast_type_analysis_8cpp_source.html">AstTypeAnalysis.cpp</a>.</p>

<p>References <a class="el" href="_ast_argument_8h_source.html#l00308">souffle::AstUnaryFunctor::acceptsNumbers()</a>, <a class="el" href="_ast_argument_8h_source.html#l00391">souffle::AstBinaryFunctor::acceptsNumbers()</a>, <a class="el" href="_ast_argument_8h_source.html#l00485">souffle::AstTernaryFunctor::acceptsNumbers()</a>, <a class="el" href="_ast_argument_8h_source.html#l00313">souffle::AstUnaryFunctor::acceptsSymbols()</a>, <a class="el" href="_ast_argument_8h_source.html#l00396">souffle::AstBinaryFunctor::acceptsSymbols()</a>, <a class="el" href="_ast_argument_8h_source.html#l00490">souffle::AstTernaryFunctor::acceptsSymbols()</a>, <a class="el" href="_ast_argument_8h_source.html#l00465">souffle::AstTernaryFunctor::getArg()</a>, <a class="el" href="_ast_literal_8h_source.html#l00111">souffle::AstAtom::getArguments()</a>, <a class="el" href="_ast_argument_8h_source.html#l00557">souffle::AstRecordInit::getArguments()</a>, <a class="el" href="_ast_literal_8h_source.html#l00187">souffle::AstNegation::getAtom()</a>, <a class="el" href="_ast_utils_8cpp_source.html#l00038">souffle::getAtomRelation()</a>, <a class="el" href="_ast_argument_8h_source.html#l00368">souffle::AstBinaryFunctor::getLHS()</a>, <a class="el" href="_ast_literal_8h_source.html#l00378">souffle::AstBinaryConstraint::getLHS()</a>, <a class="el" href="_type_system_8h_source.html#l00353">souffle::TypeEnvironment::getNumberType()</a>, <a class="el" href="_ast_argument_8h_source.html#l00289">souffle::AstUnaryFunctor::getOperand()</a>, <a class="el" href="_ast_argument_8h_source.html#l00372">souffle::AstBinaryFunctor::getRHS()</a>, <a class="el" href="_ast_literal_8h_source.html#l00383">souffle::AstBinaryConstraint::getRHS()</a>, <a class="el" href="_type_system_8h_source.html#l00357">souffle::TypeEnvironment::getSymbolType()</a>, <a class="el" href="_ast_argument_8h_source.html#l00693">souffle::AstAggregator::getTargetExpression()</a>, <a class="el" href="_type_system_8cpp_source.html#l00097">souffle::TypeEnvironment::getType()</a>, <a class="el" href="json11_8h_source.html#l00669">i</a>, <a class="el" href="_ast_argument_8h_source.html#l00298">souffle::AstUnaryFunctor::isNumerical()</a>, <a class="el" href="_ast_argument_8h_source.html#l00381">souffle::AstBinaryFunctor::isNumerical()</a>, <a class="el" href="_ast_argument_8h_source.html#l00475">souffle::AstTernaryFunctor::isNumerical()</a>, <a class="el" href="_type_system_8cpp_source.html#l00364">souffle::isSubtypeOf()</a>, <a class="el" href="_ast_argument_8h_source.html#l00303">souffle::AstUnaryFunctor::isSymbolic()</a>, <a class="el" href="_ast_argument_8h_source.html#l00386">souffle::AstBinaryFunctor::isSymbolic()</a>, <a class="el" href="_ast_argument_8h_source.html#l00480">souffle::AstTernaryFunctor::isSymbolic()</a>, <a class="el" href="_type_system_8cpp_source.html#l00083">souffle::TypeEnvironment::isType()</a>, <a class="el" href="_ast_transforms_8cpp_source.html#l00221">lhs</a>, <a class="el" href="_tui_8h_source.html#l00920">rel()</a>, and <a class="el" href="_ast_transforms_8cpp_source.html#l00222">rhs</a>.</p>

<p>Referenced by <a class="el" href="_ast_transforms_8cpp_source.html#l00599">souffle::MaterializeAggregationQueriesTransformer::materializeAggregationQueries()</a>, and <a class="el" href="_ast_type_analysis_8cpp_source.html#l00853">run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                                                                                                      {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keyword">struct </span>Analysis : <span class="keyword">public</span> AstConstraintAnalysis&lt;TypeVar&gt; {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keyword">const</span> TypeEnvironment&amp; env;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keyword">const</span> AstProgram* program;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        std::set&lt;const AstAtom*&gt; negated;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        Analysis(<span class="keyword">const</span> TypeEnvironment&amp; env, <span class="keyword">const</span> AstProgram* program) : env(env), program(program) {}</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="comment">// predicate</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordtype">void</span> visitAtom(<span class="keyword">const</span> AstAtom&amp; atom)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            <span class="comment">// get relation</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <span class="keyword">auto</span> <a class="code" href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32">rel</a> = <a class="code" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0">getAtomRelation</a>(&amp;atom, program);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32">rel</a>) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                <span class="keywordflow">return</span>;  <span class="comment">// error in input program</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            <span class="keyword">auto</span> atts = <a class="code" href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32">rel</a>-&gt;getAttributes();</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <span class="keyword">auto</span> args = atom.getArguments();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordflow">if</span> (atts.size() != args.size()) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                <span class="keywordflow">return</span>;  <span class="comment">// error in input program</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="comment">// set upper boundary of argument types</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> &lt; atts.size(); <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>++) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; typeName = atts[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>]-&gt;getTypeName();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                <span class="keywordflow">if</span> (env.isType(typeName)) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    <span class="comment">// check whether atom is not negated</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    <span class="keywordflow">if</span> (negated.find(&amp;atom) == negated.end()) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                        addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(args[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>]), env.getType(typeName)));</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                        addConstraint(isSupertypeOf(getVar(args[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>]), env.getType(typeName)));</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                    }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="comment">// #2 - negations need to be skipped</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordtype">void</span> visitNegation(<span class="keyword">const</span> AstNegation&amp; cur)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <span class="comment">// add nested atom to black-list</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            negated.insert(cur.getAtom());</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="comment">// symbol</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordtype">void</span> visitStringConstant(<span class="keyword">const</span> AstStringConstant&amp; cnst)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <span class="comment">// this type has to be a sub-type of symbol</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(cnst), env.getSymbolType()));</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="comment">// number</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordtype">void</span> visitNumberConstant(<span class="keyword">const</span> AstNumberConstant&amp; cnst)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="comment">// this type has to be a sub-type of number</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(cnst), env.getNumberType()));</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="comment">// binary constraint</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordtype">void</span> visitBinaryConstraint(<span class="keyword">const</span> AstBinaryConstraint&amp; <a class="code" href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32">rel</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <span class="keyword">auto</span> <a class="code" href="_ast_transforms_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a> = getVar(rel.getLHS());</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="keyword">auto</span> <a class="code" href="_ast_transforms_8cpp.html#a99d7476d0087a8405f52a79852efa6eb">rhs</a> = getVar(rel.getRHS());</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(<a class="code" href="_ast_transforms_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a>, rhs));</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(rhs, <a class="code" href="_ast_transforms_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a>));</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="comment">// unary functor</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordtype">void</span> visitUnaryFunctor(<span class="keyword">const</span> AstUnaryFunctor&amp; fun)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <span class="keyword">auto</span> out = getVar(fun);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <span class="keyword">auto</span> in = getVar(fun.getOperand());</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="comment">// add a constraint for the return type of the unary functor</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <span class="keywordflow">if</span> (fun.isNumerical()) {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(out, env.getNumberType()));</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            <span class="keywordflow">if</span> (fun.isSymbolic()) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(out, env.getSymbolType()));</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <span class="comment">// add a constraint for the argument type of the unary functor</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsNumbers()) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(in, env.getNumberType()));</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsSymbols()) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(in, env.getSymbolType()));</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="comment">// binary functor</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="keywordtype">void</span> visitBinaryFunctor(<span class="keyword">const</span> AstBinaryFunctor&amp; fun)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keyword">auto</span> cur = getVar(fun);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <span class="keyword">auto</span> <a class="code" href="_ast_transforms_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a> = getVar(fun.getLHS());</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <span class="keyword">auto</span> rhs = getVar(fun.getRHS());</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            <span class="comment">// add a constraint for the return type of the binary functor</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            <span class="keywordflow">if</span> (fun.isNumerical()) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(cur, env.getNumberType()));</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            <span class="keywordflow">if</span> (fun.isSymbolic()) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(cur, env.getSymbolType()));</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <span class="comment">// add a constraint for the first argument of the binary functor</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsNumbers(0)) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(<a class="code" href="_ast_transforms_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a>, env.getNumberType()));</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsSymbols(0)) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(<a class="code" href="_ast_transforms_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a>, env.getSymbolType()));</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <span class="comment">// add a constraint for the second argument of the binary functor</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsNumbers(1)) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(rhs, env.getNumberType()));</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsSymbols(1)) {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(rhs, env.getSymbolType()));</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="comment">// ternary functor</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordtype">void</span> visitTernaryFunctor(<span class="keyword">const</span> AstTernaryFunctor&amp; fun)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <span class="keyword">auto</span> cur = getVar(fun);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="keyword">auto</span> a0 = getVar(fun.getArg(0));</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keyword">auto</span> a1 = getVar(fun.getArg(1));</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <span class="keyword">auto</span> a2 = getVar(fun.getArg(2));</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <span class="comment">// add a constraint for the return type of the ternary functor</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">if</span> (fun.isNumerical()) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(cur, env.getNumberType()));</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">if</span> (fun.isSymbolic()) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(cur, env.getSymbolType()));</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <span class="comment">// add a constraint for the first argument of the ternary functor</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsNumbers(0)) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(a0, env.getNumberType()));</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsSymbols(0)) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(a0, env.getSymbolType()));</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="comment">// add a constraint for the second argument of the ternary functor</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsNumbers(1)) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(a1, env.getNumberType()));</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsSymbols(1)) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(a1, env.getSymbolType()));</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <span class="comment">// add a constraint for the third argument of the ternary functor</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsNumbers(2)) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(a2, env.getNumberType()));</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <span class="keywordflow">if</span> (fun.acceptsSymbols(2)) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(a2, env.getSymbolType()));</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="comment">// counter</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordtype">void</span> visitCounter(<span class="keyword">const</span> AstCounter&amp; counter)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="comment">// this value must be a number value</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(counter), env.getNumberType()));</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="comment">// components of records</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="keywordtype">void</span> visitRecordInit(<span class="keyword">const</span> AstRecordInit&amp; init)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="comment">// link element types with sub-values</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="keyword">auto</span> rec = getVar(init);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> AstArgument* value : init.getArguments()) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                addConstraint(isSubtypeOfComponent(getVar(value), rec, i++));</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="comment">// visit aggregates</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordtype">void</span> visitAggregator(<span class="keyword">const</span> AstAggregator&amp; agg)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="comment">// this value must be a number value</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(agg), env.getNumberType()));</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="comment">// also, the target expression needs to be a number</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> expr = agg.getTargetExpression()) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(expr), env.getNumberType()));</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        }</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    };</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">// run analysis</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">return</span> Analysis(env, program).analyse(clause, verbose);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;}</div>
<div class="ttc" id="_tui_8h_html_a9dae2961725e820a01dc7871b411ad32"><div class="ttname"><a href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32">rel</a></div><div class="ttdeci">void rel()</div><div class="ttdef"><b>Definition:</b> <a href="_tui_8h_source.html#l00920">Tui.h:920</a></div></div>
<div class="ttc" id="_ast_transforms_8cpp_html_aae193eebe112e754a082b152fb272018"><div class="ttname"><a href="_ast_transforms_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a></div><div class="ttdeci">std::unique_ptr&lt; AstArgument &gt; lhs</div><div class="ttdoc">The two terms to be equivalent. </div><div class="ttdef"><b>Definition:</b> <a href="_ast_transforms_8cpp_source.html#l00221">AstTransforms.cpp:221</a></div></div>
<div class="ttc" id="json11_8h_html_ae46bd26d7133dfe98f8cec7c5ac5c7a1"><div class="ttname"><a href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json11_8h_source.html#l00669">json11.h:669</a></div></div>
<div class="ttc" id="_ast_transforms_8cpp_html_a99d7476d0087a8405f52a79852efa6eb"><div class="ttname"><a href="_ast_transforms_8cpp.html#a99d7476d0087a8405f52a79852efa6eb">rhs</a></div><div class="ttdeci">std::unique_ptr&lt; AstArgument &gt; rhs</div><div class="ttdef"><b>Definition:</b> <a href="_ast_transforms_8cpp_source.html#l00222">AstTransforms.cpp:222</a></div></div>
<div class="ttc" id="namespacesouffle_html_ab18cbb3adc2ab328de0db30a3fddf7e0"><div class="ttname"><a href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0">souffle::getAtomRelation</a></div><div class="ttdeci">const AstRelation * getAtomRelation(const AstAtom *atom, const AstProgram *program)</div><div class="ttdoc">Returns the relation referenced by the given atom. </div><div class="ttdef"><b>Definition:</b> <a href="_ast_utils_8cpp_source.html#l00038">AstUtils.cpp:38</a></div></div>
<div class="ttc" id="namespacesouffle_html_a8cc19c66d9d13ce64e65f14dcabb43b3"><div class="ttname"><a href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">souffle::isSubtypeOf</a></div><div class="ttdeci">bool isSubtypeOf(const Type &amp;a, const Type &amp;b)</div><div class="ttdoc">Determines whether type a is a subtype of type b. </div><div class="ttdef"><b>Definition:</b> <a href="_type_system_8cpp_source.html#l00364">TypeSystem.cpp:364</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis_abd1dbe803142616087fc5dc59bdddb68_cgraph.png" border="0" usemap="#classsouffle_1_1_type_analysis_abd1dbe803142616087fc5dc59bdddb68_cgraph" alt=""/></div>
<map name="classsouffle_1_1_type_analysis_abd1dbe803142616087fc5dc59bdddb68_cgraph" id="classsouffle_1_1_type_analysis_abd1dbe803142616087fc5dc59bdddb68_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_unary_functor.html#a4cf82680dd81edcf5e4ae332561c3574" title="Check if the argument of this functor is a number type. " alt="" coords="487,15,655,56"/><area shape="rect" id="node4" href="classsouffle_1_1_ast_binary_functor.html#a5647b3dfc1138c23d3e31af163d67f92" title="Check if the arguments of this functor are number types. " alt="" coords="485,132,656,174"/><area shape="rect" id="node6" href="classsouffle_1_1_ast_ternary_functor.html#aff73d597a99b3ea2891440a6e138e1c8" title="Check if the arguments of this functor are number types. " alt="" coords="482,263,659,304"/><area shape="rect" id="node8" href="classsouffle_1_1_ast_unary_functor.html#af7b3b8e6e7614a6f83d21f2f916ca38b" title="Check if the argument of this functor is a symbol type. " alt="" coords="224,75,392,116"/><area shape="rect" id="node10" href="classsouffle_1_1_ast_binary_functor.html#ac62f2f378a06a318a4498a08836cf317" title="Check if the arguments of this functor are symbol types. " alt="" coords="223,196,393,238"/><area shape="rect" id="node12" href="classsouffle_1_1_ast_ternary_functor.html#a277e5f9f7128ab400d0ab645797420f5" title="Check if the arguments of this functor are symbol types. " alt="" coords="219,314,397,355"/><area shape="rect" id="node14" href="classsouffle_1_1_ast_ternary_functor.html#a260a737a4d4d1f5afe152eb62ea952e2" title="souffle::AstTernaryFunctor\l::getArg" alt="" coords="219,379,397,420"/><area shape="rect" id="node15" href="classsouffle_1_1_ast_atom.html#a11ba399d723b5f1135a35e47e51e1bad" title="Provides access to the list of arguments of this atom. " alt="" coords="203,445,413,472"/><area shape="rect" id="node17" href="classsouffle_1_1_ast_record_init.html#ae516fe38512e96c666014acce207b983" title="souffle::AstRecordInit\l::getArguments" alt="" coords="233,496,383,538"/><area shape="rect" id="node18" href="classsouffle_1_1_ast_negation.html#a0737c379dac1c350accecb1e2301698c" title="Returns the nested atom as the referenced atom. " alt="" coords="237,562,379,603"/><area shape="rect" id="node19" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0" title="Returns the relation referenced by the given atom. " alt="" coords="225,628,391,654"/><area shape="rect" id="node22" href="classsouffle_1_1_ast_binary_functor.html#af07199592aa2dfebeb17fb1a3fdee3ab" title="souffle::AstBinaryFunctor\l::getLHS" alt="" coords="223,679,393,720"/><area shape="rect" id="node23" href="classsouffle_1_1_ast_binary_constraint.html#a26c7032570077e96344af46146f4360d" title="Return LHS argument. " alt="" coords="215,744,401,786"/><area shape="rect" id="node24" href="classsouffle_1_1_type_environment.html#a3607b9fb617c47df3da5050384b5f635" title="souffle::TypeEnvironment\l::getNumberType" alt="" coords="756,1060,927,1102"/><area shape="rect" id="node25" href="classsouffle_1_1_type_environment.html#ad66cb326f809dc980e7901dfbe1fcdc5" title="souffle::TypeEnvironment\l::getType" alt="" coords="1003,887,1173,928"/><area shape="rect" id="node26" href="classsouffle_1_1_type_environment.html#af6f82790cb9e31b0efb8583894db3fa3" title="souffle::TypeEnvironment\l::isType" alt="" coords="1221,832,1392,874"/><area shape="rect" id="node27" href="classsouffle_1_1_ast_unary_functor.html#a8ce4072c9ac9ba96517ac90cfd45a15f" title="souffle::AstUnaryFunctor\l::getOperand" alt="" coords="224,1064,392,1106"/><area shape="rect" id="node28" href="classsouffle_1_1_ast_binary_functor.html#a23dfd787b0f56c314675dfea50eee0b0" title="souffle::AstBinaryFunctor\l::getRHS" alt="" coords="223,1130,393,1171"/><area shape="rect" id="node29" href="classsouffle_1_1_ast_binary_constraint.html#a5b708f1d607128003c3205a7a0fd12f2" title="Return RHS argument. " alt="" coords="215,1195,401,1236"/><area shape="rect" id="node30" href="classsouffle_1_1_type_environment.html#a66b0c5761bcf5248516f08310f3b0817" title="souffle::TypeEnvironment\l::getSymbolType" alt="" coords="756,912,927,954"/><area shape="rect" id="node31" href="classsouffle_1_1_ast_aggregator.html#a59e520e92b927956903439a375c9ce62" title="souffle::AstAggregator\l::getTargetExpression" alt="" coords="232,1260,384,1302"/><area shape="rect" id="node32" href="classsouffle_1_1_ast_unary_functor.html#a7ed415b3d440dc1a32d109d9b881b72c" title="Check if the return value of this functor is a number type. " alt="" coords="487,1319,655,1360"/><area shape="rect" id="node34" href="classsouffle_1_1_ast_binary_functor.html#afd9734fc0a28e574124dd20840ff6e59" title="Check if the return value of this functor is a number type. " alt="" coords="485,1436,656,1478"/><area shape="rect" id="node36" href="classsouffle_1_1_ast_ternary_functor.html#ad7779abfcbbaa627340c8c5a2a0eba41" title="Check if the return value of this functor is a number type. " alt="" coords="482,1554,659,1595"/><area shape="rect" id="node38" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3" title="Determines whether type a is a subtype of type b. " alt="" coords="237,962,379,989"/><area shape="rect" id="node42" href="classsouffle_1_1_ast_unary_functor.html#a5bcce46ecc322a38848775625f569d76" title="Check if the return value of this functor is a symbol type. " alt="" coords="224,1378,392,1419"/><area shape="rect" id="node44" href="classsouffle_1_1_ast_binary_functor.html#a7bbbec45d301624dadda290fd87ba1b6" title="Check if the return value of this functor is a symbol type. " alt="" coords="223,1495,393,1536"/><area shape="rect" id="node46" href="classsouffle_1_1_ast_ternary_functor.html#ac04de00a329adf7fa64ef8ff9ea54ee6" title="Check if the return value of this functor is a symbol type. " alt="" coords="219,1612,397,1654"/><area shape="rect" id="node48" href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32" title="rel" alt="" coords="289,1678,327,1705"/><area shape="rect" id="node3" href="namespacesouffle.html#ac9af2eda2dd88cc60de32a89c4dc891c" title="Returns whether the given operator takes a numeric argument. " alt="" coords="732,52,951,78"/><area shape="rect" id="node5" href="namespacesouffle.html#a6202e50cad5266ddb9a18f3788df4625" title="Determines whether an argument has a number value. " alt="" coords="757,166,926,207"/><area shape="rect" id="node7" href="namespacesouffle.html#a529b2e542971d474c9d97b1546001dcf" title="Determines whether an argument has a number value. " alt="" coords="754,296,929,338"/><area shape="rect" id="node9" href="namespacesouffle.html#a3523c0cffbdbed0fabf4ad2f298f9c51" title="Returns whether the given operator takes a symbolic argument. " alt="" coords="462,81,679,108"/><area shape="rect" id="node11" href="namespacesouffle.html#a29028449b83efcd97fc86857d35572c0" title="Determines whether an argument has a symbolic value. " alt="" coords="486,198,655,239"/><area shape="rect" id="node13" href="namespacesouffle.html#a7778845f2059dbeb6e09b524cf45fca1" title="Determines whether an argument has a symbolic value. " alt="" coords="483,328,658,370"/><area shape="rect" id="node16" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="503,474,638,501"/><area shape="rect" id="node20" href="classsouffle_1_1_ast_atom.html#adfaa949dc3e89fa2dc25981963ea5752" title="Return the name of this atom. " alt="" coords="480,598,661,625"/><area shape="rect" id="node21" href="classsouffle_1_1_ast_program.html#ae4e787ea4d338524ea6b346d5dedc290" title="Find and return the relation in the program given its name. " alt="" coords="501,650,640,691"/><area shape="rect" id="node33" href="namespacesouffle.html#abd31efb9f808712dfee9a892ec1dc08e" title="Returns whether the given operator has a numeric return value. " alt="" coords="751,1356,931,1382"/><area shape="rect" id="node35" href="namespacesouffle.html#a5ecdc282acb8ee99226175690bf397d0" title="Determines whether the given operator has a numeric return value. " alt="" coords="750,1473,933,1500"/><area shape="rect" id="node37" href="namespacesouffle.html#a886a8cccceb06e389e680c9ecf584deb" title="Determines whether the given operator has a numeric return value. " alt="" coords="747,1590,936,1617"/><area shape="rect" id="node39" href="classsouffle_1_1_type.html#ac0e65ae3329b48ff0f0ad4c1b179b438" title="souffle::Type::getTypeEnvironment" alt="" coords="728,1009,955,1036"/><area shape="rect" id="node40" href="namespacesouffle.html#a4e502e6abb9a3e9a8e4c1168dbf23743" title="Determines whether the given type is a number type. " alt="" coords="493,1064,648,1090"/><area shape="rect" id="node41" href="namespacesouffle.html#a11f6c352eec6bde7b5a0b143ffe64e3b" title="Determines whether the given type is a symbol type. " alt="" coords="495,962,647,989"/><area shape="rect" id="node43" href="namespacesouffle.html#ae4786045b9e6b3d5543115981971eb89" title="Returns whether the given operator has a symbolic return value. " alt="" coords="478,1385,663,1412"/><area shape="rect" id="node45" href="namespacesouffle.html#aff8ed81eb5556d66dba3cf285ecee213" title="Determines whether the operator has a symbolic return value. " alt="" coords="477,1502,664,1529"/><area shape="rect" id="node47" href="namespacesouffle.html#a53727befba61d13b3545ef75df0963dd" title="Determines whether the operator has a symbolic return value. " alt="" coords="473,1620,668,1646"/><area shape="rect" id="node49" href="classsouffle_1_1profile_1_1_output_processor.html#a4a4f93851e27f7202de0f1a99c5114ca" title="souffle::profile::Output\lProcessor::formatTable" alt="" coords="491,1671,650,1712"/><area shape="rect" id="node50" href="classsouffle_1_1profile_1_1_table.html#ad5808507021b6f9cdd5641aac825f29e" title="souffle::profile::Table\l::getRows" alt="" coords="499,1736,643,1778"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad712d537f166af824ce980aac5088b09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a> souffle::TypeAnalysis::getTypes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the computed types for the given argument. </p>

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00086">86</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

<p>References <a class="el" href="_ast_type_analysis_8h_source.html#l00073">argumentTypes</a>.</p>

<p>Referenced by <a class="el" href="_ast_semantic_checker_8cpp_source.html#l00064">souffle::AstSemanticChecker::checkProgram()</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                                        {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keyword">auto</span> found = <a class="code" href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">argumentTypes</a>.find(argument);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        assert(found != <a class="code" href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">argumentTypes</a>.end());</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> found-&gt;second;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_aa78a3ac07ebd79b4d3e3d1c277522178"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">souffle::TypeAnalysis::argumentTypes</a></div><div class="ttdeci">std::map&lt; const AstArgument *, TypeSet &gt; argumentTypes</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00073">AstTypeAnalysis.h:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad8b14d983a147434ebbbea66d4072229"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void souffle::TypeAnalysis::print </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>print the analysis result in HTML format </p>

<p>Reimplemented from <a class="el" href="classsouffle_1_1_ast_analysis.html#af5abc70c9703ab7d367759b361a0ac66">souffle::AstAnalysis</a>.</p>

<p>Definition at line <a class="el" href="_ast_type_analysis_8cpp_source.html#l00871">871</a> of file <a class="el" href="_ast_type_analysis_8cpp_source.html">AstTypeAnalysis.cpp</a>.</p>

<p>References <a class="el" href="_ast_type_analysis_8h_source.html#l00074">annotatedClauses</a>.</p>
<div class="fragment"><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                             {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; curr : <a class="code" href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">annotatedClauses</a>) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        os &lt;&lt; *curr &lt;&lt; std::endl;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;}</div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_ac9b0bfb44850f1c3295306cd9cea7c84"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">souffle::TypeAnalysis::annotatedClauses</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; AstClause &gt; &gt; annotatedClauses</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00074">AstTypeAnalysis.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a37750304e3c3efc004294bbc934e8549"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void souffle::TypeAnalysis::run </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>run analysis for a RAM translation unit </p>

<p>Implements <a class="el" href="classsouffle_1_1_ast_analysis.html#a1d096d11d2b9fbd6b98ccd89d761f719">souffle::AstAnalysis</a>.</p>

<p>Definition at line <a class="el" href="_ast_type_analysis_8cpp_source.html#l00853">853</a> of file <a class="el" href="_ast_type_analysis_8cpp_source.html">AstTypeAnalysis.cpp</a>.</p>

<p>References <a class="el" href="_ast_type_analysis_8cpp_source.html#l00877">analyseTypes()</a>, <a class="el" href="_ast_type_analysis_8h_source.html#l00074">annotatedClauses</a>, <a class="el" href="_ast_type_analysis_8h_source.html#l00073">argumentTypes</a>, <a class="el" href="_global_8h_source.html#l00139">souffle::Global::config()</a>, <a class="el" href="_ast_type_analysis_8cpp_source.html#l00790">souffle::createAnnotatedClause()</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00062">souffle::AstTranslationUnit::getAnalysis()</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00074">souffle::AstTranslationUnit::getProgram()</a>, <a class="el" href="_ast_program_8cpp_source.html#l00133">souffle::AstProgram::getRelations()</a>, and <a class="el" href="_tui_8h_source.html#l00920">rel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                                                                {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keyword">auto</span>* typeEnvAnalysis = translationUnit.getAnalysis&lt;TypeEnvironmentAnalysis&gt;();</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> AstRelation* <a class="code" href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32">rel</a> : translationUnit.getProgram()-&gt;getRelations()) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> AstClause* clause : <a class="code" href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32">rel</a>-&gt;getClauses()) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="comment">// Perform the type analysis</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            std::map&lt;const AstArgument*, TypeSet&gt; clauseArgumentTypes = <a class="code" href="classsouffle_1_1_type_analysis.html#abd1dbe803142616087fc5dc59bdddb68">analyseTypes</a>(</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                    typeEnvAnalysis-&gt;getTypeEnvironment(), *clause, translationUnit.getProgram());</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <a class="code" href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">argumentTypes</a>.insert(clauseArgumentTypes.begin(), clauseArgumentTypes.end());</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640">Global::config</a>().get(<span class="stringliteral">&quot;debug-report&quot;</span>).empty()) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                <span class="comment">// Store an annotated clause for printing purposes</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                AstClause* annotatedClause = <a class="code" href="namespacesouffle.html#a42eef65f1512c8189dc19ae26f200acc">createAnnotatedClause</a>(clause, clauseArgumentTypes);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                <a class="code" href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">annotatedClauses</a>.push_back(std::unique_ptr&lt;AstClause&gt;(annotatedClause));</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_abd1dbe803142616087fc5dc59bdddb68"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#abd1dbe803142616087fc5dc59bdddb68">souffle::TypeAnalysis::analyseTypes</a></div><div class="ttdeci">static std::map&lt; const AstArgument *, TypeSet &gt; analyseTypes(const TypeEnvironment &amp;env, const AstClause &amp;clause, const AstProgram *program, bool verbose=false)</div><div class="ttdoc">Analyse the given clause and computes for each contained argument a set of potential types...</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8cpp_source.html#l00877">AstTypeAnalysis.cpp:877</a></div></div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_ac9b0bfb44850f1c3295306cd9cea7c84"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">souffle::TypeAnalysis::annotatedClauses</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; AstClause &gt; &gt; annotatedClauses</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00074">AstTypeAnalysis.h:74</a></div></div>
<div class="ttc" id="_tui_8h_html_a9dae2961725e820a01dc7871b411ad32"><div class="ttname"><a href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32">rel</a></div><div class="ttdeci">void rel()</div><div class="ttdef"><b>Definition:</b> <a href="_tui_8h_source.html#l00920">Tui.h:920</a></div></div>
<div class="ttc" id="namespacesouffle_html_a42eef65f1512c8189dc19ae26f200acc"><div class="ttname"><a href="namespacesouffle.html#a42eef65f1512c8189dc19ae26f200acc">souffle::createAnnotatedClause</a></div><div class="ttdeci">AstClause * createAnnotatedClause(const AstClause *clause, const std::map&lt; const AstArgument *, TypeSet &gt; argumentTypes)</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8cpp_source.html#l00790">AstTypeAnalysis.cpp:790</a></div></div>
<div class="ttc" id="classsouffle_1_1_global_html_a2dcb257b0f98d0b882862427cc965640"><div class="ttname"><a href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640">souffle::Global::config</a></div><div class="ttdeci">static MainConfig &amp; config()</div><div class="ttdef"><b>Definition:</b> <a href="_global_8h_source.html#l00139">Global.h:139</a></div></div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_aa78a3ac07ebd79b4d3e3d1c277522178"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">souffle::TypeAnalysis::argumentTypes</a></div><div class="ttdeci">std::map&lt; const AstArgument *, TypeSet &gt; argumentTypes</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00073">AstTypeAnalysis.h:73</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis_a37750304e3c3efc004294bbc934e8549_cgraph.png" border="0" usemap="#classsouffle_1_1_type_analysis_a37750304e3c3efc004294bbc934e8549_cgraph" alt=""/></div>
<map name="classsouffle_1_1_type_analysis_a37750304e3c3efc004294bbc934e8549_cgraph" id="classsouffle_1_1_type_analysis_a37750304e3c3efc004294bbc934e8549_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_type_analysis.html#abd1dbe803142616087fc5dc59bdddb68" title="Analyse the given clause and computes for each contained argument a set of potential types..." alt="" coords="245,874,393,915"/><area shape="rect" id="node39" href="_tui_8h.html#a9dae2961725e820a01dc7871b411ad32" title="rel" alt="" coords="542,1727,581,1753"/><area shape="rect" id="node43" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640" title="souffle::Global::config" alt="" coords="244,1676,393,1703"/><area shape="rect" id="node44" href="namespacesouffle.html#a42eef65f1512c8189dc19ae26f200acc" title="souffle::createAnnotated\lClause" alt="" coords="237,1909,401,1950"/><area shape="rect" id="node48" href="classsouffle_1_1_ast_translation_unit.html#a7a1598acb91192e90026763b3b968653" title="get analysis: analysis is generated on the fly if not present " alt="" coords="230,1778,407,1819"/><area shape="rect" id="node49" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="230,1843,407,1885"/><area shape="rect" id="node50" href="classsouffle_1_1_ast_program.html#a60fcb7d3a21a06be7b48f5849917a22b" title="Get all relations in the program. " alt="" coords="249,1610,388,1651"/><area shape="rect" id="node3" href="classsouffle_1_1_ast_unary_functor.html#a4cf82680dd81edcf5e4ae332561c3574" title="Check if the argument of this functor is a number type. " alt="" coords="740,294,908,335"/><area shape="rect" id="node5" href="classsouffle_1_1_ast_binary_functor.html#a5647b3dfc1138c23d3e31af163d67f92" title="Check if the arguments of this functor are number types. " alt="" coords="739,359,909,401"/><area shape="rect" id="node7" href="classsouffle_1_1_ast_ternary_functor.html#aff73d597a99b3ea2891440a6e138e1c8" title="Check if the arguments of this functor are number types. " alt="" coords="735,555,913,597"/><area shape="rect" id="node9" href="classsouffle_1_1_ast_unary_functor.html#af7b3b8e6e7614a6f83d21f2f916ca38b" title="Check if the argument of this functor is a symbol type. " alt="" coords="477,253,645,294"/><area shape="rect" id="node11" href="classsouffle_1_1_ast_binary_functor.html#ac62f2f378a06a318a4498a08836cf317" title="Check if the arguments of this functor are symbol types. " alt="" coords="476,421,647,462"/><area shape="rect" id="node13" href="classsouffle_1_1_ast_ternary_functor.html#a277e5f9f7128ab400d0ab645797420f5" title="Check if the arguments of this functor are symbol types. " alt="" coords="473,486,650,527"/><area shape="rect" id="node15" href="classsouffle_1_1_ast_ternary_functor.html#a260a737a4d4d1f5afe152eb62ea952e2" title="souffle::AstTernaryFunctor\l::getArg" alt="" coords="473,603,650,645"/><area shape="rect" id="node16" href="classsouffle_1_1_ast_atom.html#a11ba399d723b5f1135a35e47e51e1bad" title="Provides access to the list of arguments of this atom. " alt="" coords="457,669,666,696"/><area shape="rect" id="node18" href="classsouffle_1_1_ast_record_init.html#ae516fe38512e96c666014acce207b983" title="souffle::AstRecordInit\l::getArguments" alt="" coords="487,721,636,762"/><area shape="rect" id="node19" href="classsouffle_1_1_ast_negation.html#a0737c379dac1c350accecb1e2301698c" title="Returns the nested atom as the referenced atom. " alt="" coords="491,786,632,827"/><area shape="rect" id="node20" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0" title="Returns the relation referenced by the given atom. " alt="" coords="478,852,645,879"/><area shape="rect" id="node22" href="classsouffle_1_1_ast_binary_functor.html#af07199592aa2dfebeb17fb1a3fdee3ab" title="souffle::AstBinaryFunctor\l::getLHS" alt="" coords="476,903,647,945"/><area shape="rect" id="node23" href="classsouffle_1_1_ast_binary_constraint.html#a26c7032570077e96344af46146f4360d" title="Return LHS argument. " alt="" coords="468,969,655,1010"/><area shape="rect" id="node24" href="classsouffle_1_1_type_environment.html#a3607b9fb617c47df3da5050384b5f635" title="souffle::TypeEnvironment\l::getNumberType" alt="" coords="476,1151,647,1193"/><area shape="rect" id="node25" href="classsouffle_1_1_type_environment.html#ad66cb326f809dc980e7901dfbe1fcdc5" title="souffle::TypeEnvironment\l::getType" alt="" coords="739,1118,909,1159"/><area shape="rect" id="node26" href="classsouffle_1_1_type_environment.html#af6f82790cb9e31b0efb8583894db3fa3" title="souffle::TypeEnvironment\l::isType" alt="" coords="1005,1073,1176,1114"/><area shape="rect" id="node27" href="classsouffle_1_1_ast_unary_functor.html#a8ce4072c9ac9ba96517ac90cfd45a15f" title="souffle::AstUnaryFunctor\l::getOperand" alt="" coords="477,1217,645,1258"/><area shape="rect" id="node28" href="classsouffle_1_1_ast_binary_functor.html#a23dfd787b0f56c314675dfea50eee0b0" title="souffle::AstBinaryFunctor\l::getRHS" alt="" coords="476,1282,647,1323"/><area shape="rect" id="node29" href="classsouffle_1_1_ast_binary_constraint.html#a5b708f1d607128003c3205a7a0fd12f2" title="Return RHS argument. " alt="" coords="468,1347,655,1389"/><area shape="rect" id="node30" href="classsouffle_1_1_type_environment.html#a66b0c5761bcf5248516f08310f3b0817" title="souffle::TypeEnvironment\l::getSymbolType" alt="" coords="476,1086,647,1127"/><area shape="rect" id="node31" href="classsouffle_1_1_ast_aggregator.html#a59e520e92b927956903439a375c9ce62" title="souffle::AstAggregator\l::getTargetExpression" alt="" coords="485,1465,637,1506"/><area shape="rect" id="node32" href="classsouffle_1_1_ast_unary_functor.html#a7ed415b3d440dc1a32d109d9b881b72c" title="Check if the return value of this functor is a number type. " alt="" coords="477,1530,645,1571"/><area shape="rect" id="node33" href="classsouffle_1_1_ast_binary_functor.html#afd9734fc0a28e574124dd20840ff6e59" title="Check if the return value of this functor is a number type. " alt="" coords="476,1595,647,1637"/><area shape="rect" id="node34" href="classsouffle_1_1_ast_ternary_functor.html#ad7779abfcbbaa627340c8c5a2a0eba41" title="Check if the return value of this functor is a number type. " alt="" coords="473,1661,650,1702"/><area shape="rect" id="node35" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3" title="Determines whether type a is a subtype of type b. " alt="" coords="491,5,632,32"/><area shape="rect" id="node36" href="classsouffle_1_1_ast_unary_functor.html#a5bcce46ecc322a38848775625f569d76" title="Check if the return value of this functor is a symbol type. " alt="" coords="477,57,645,98"/><area shape="rect" id="node37" href="classsouffle_1_1_ast_binary_functor.html#a7bbbec45d301624dadda290fd87ba1b6" title="Check if the return value of this functor is a symbol type. " alt="" coords="476,122,647,163"/><area shape="rect" id="node38" href="classsouffle_1_1_ast_ternary_functor.html#ac04de00a329adf7fa64ef8ff9ea54ee6" title="Check if the return value of this functor is a symbol type. " alt="" coords="473,187,650,229"/><area shape="rect" id="node4" href="namespacesouffle.html#ac9af2eda2dd88cc60de32a89c4dc891c" title="Returns whether the given operator takes a numeric argument. " alt="" coords="981,272,1200,299"/><area shape="rect" id="node6" href="namespacesouffle.html#a6202e50cad5266ddb9a18f3788df4625" title="Determines whether an argument has a number value. " alt="" coords="1006,393,1175,434"/><area shape="rect" id="node8" href="namespacesouffle.html#a529b2e542971d474c9d97b1546001dcf" title="Determines whether an argument has a number value. " alt="" coords="1003,523,1178,565"/><area shape="rect" id="node10" href="namespacesouffle.html#a3523c0cffbdbed0fabf4ad2f298f9c51" title="Returns whether the given operator takes a symbolic argument. " alt="" coords="715,243,933,269"/><area shape="rect" id="node12" href="namespacesouffle.html#a29028449b83efcd97fc86857d35572c0" title="Determines whether an argument has a symbolic value. " alt="" coords="739,425,909,466"/><area shape="rect" id="node14" href="namespacesouffle.html#a7778845f2059dbeb6e09b524cf45fca1" title="Determines whether an argument has a symbolic value. " alt="" coords="737,490,911,531"/><area shape="rect" id="node17" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="757,699,891,725"/><area shape="rect" id="node21" href="classsouffle_1_1_ast_atom.html#adfaa949dc3e89fa2dc25981963ea5752" title="Return the name of this atom. " alt="" coords="733,852,915,879"/><area shape="rect" id="node40" href="classsouffle_1_1profile_1_1_output_processor.html#a4a4f93851e27f7202de0f1a99c5114ca" title="souffle::profile::Output\lProcessor::formatTable" alt="" coords="745,1719,903,1761"/><area shape="rect" id="node41" href="classsouffle_1_1profile_1_1_table.html#ad5808507021b6f9cdd5641aac825f29e" title="souffle::profile::Table\l::getRows" alt="" coords="752,1785,896,1826"/><area shape="rect" id="node42" href="classsouffle_1_1profile_1_1_table.html#ad4cd261b758bcc2bc223b1b8d9aaa94e" title="souffle::profile::Table\l::sort" alt="" coords="752,1654,896,1695"/><area shape="rect" id="node45" href="classsouffle_1_1_ast_clause.html#ab7a5b630d02cd69873aab066c2bd9c46" title="Mutates this node. " alt="" coords="496,1967,627,2009"/><area shape="rect" id="node46" href="classsouffle_1_1_ast_clause.html#aef9cb574a067db73c83fd9c9f63d297f" title="Creates a clone of this AST sub&#45;structure. " alt="" coords="496,1850,627,1891"/><area shape="rect" id="node47" href="namespacesouffle.html#a4e134334ce89f6ebc4075e1089b1f80d" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="484,1916,639,1943"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="ac9b0bfb44850f1c3295306cd9cea7c84"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::unique_ptr&lt;<a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a>&gt; &gt; souffle::TypeAnalysis::annotatedClauses</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00074">74</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

<p>Referenced by <a class="el" href="_ast_type_analysis_8cpp_source.html#l00871">print()</a>, and <a class="el" href="_ast_type_analysis_8cpp_source.html#l00853">run()</a>.</p>

</div>
</div>
<a class="anchor" id="aa78a3ac07ebd79b4d3e3d1c277522178"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_ast_transforms_8cpp.html#a32ecbd9872be86ec1594cff1d9698d99">std::map</a>&lt;const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a>*, <a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a>&gt; souffle::TypeAnalysis::argumentTypes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00073">73</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

<p>Referenced by <a class="el" href="_ast_type_analysis_8h_source.html#l00086">getTypes()</a>, and <a class="el" href="_ast_type_analysis_8cpp_source.html#l00853">run()</a>.</p>

</div>
</div>
<a class="anchor" id="a88c2b46242dcb7466a869059309b965e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr const char* souffle::TypeAnalysis::name = &quot;type-analysis&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00077">77</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a></li>
<li><a class="el" href="_ast_type_analysis_8cpp_source.html">AstTypeAnalysis.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Sep 30 2018 14:58:54 for souffle by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
